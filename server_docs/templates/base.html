<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8"/>
        <link rel="icon" sizes="any" href="{% static 'server_docs/images/icon.ico' %}"/>
        <link rel="stylesheet" href="{% static 'server_docs/css/base.css' %}"/>
        <script src="{% static 'server_docs/js/jquery.js' %}"></script>
        <title>{{ title }} | {{ server_name }}</title>
    </head>
    <body>
        <div class="container">
            <div class="left" id="left">
                <a id="picture"><img alt="MCS console logo" src="{% static 'server_docs/images/picture.png' %}" class="picture"></a>
                <a href="/search" title="Search page" class="to-search-container" id="to-search-container">
                    <button class="to-search"><big>Search page</big></button>
                </a>
            </div>
            <div class="right">
                {% block content %}{% endblock content %}
            </div>
            <script>
                function redirect() {
                    $(document).ready(function() {
                        var _value = $('#search-bar').attr('value');
                        var value = _value;//.replace(/ /g, '+');
                        window.location.pathname = '/search?key=' + value
                    });
                }

                $(document).ready(function() {
                    $.getJSON('/api/enabled_html', function(data) {
                        var firstKey = Object.keys(data)[0];
                        var firstValue = data[firstKey];
                        $('#picture').attr('href', ('/' + firstKey).replace('.html', ''));
                        $('#picture').attr('title', firstValue + ' | {{ server_name }}') 

                        var keys = Object.keys(data);
                        for (var i = 0; i < keys.length; i++) {
                            var key = keys[i];
                            var value = data[key]
                            // <a href="/example" title="Example page" | Myserver"><button class="button"><big>Example page</big></button></a>
                            $('#left').append($('<a href="' // <a href="
                            + ('/' + key).replace('.html', '') // /example
                            + '" title="' // " title="
                            + value // Example page
                            + ' | {{ server_name }}"><button class="button"><big>' //  | Myserver"><button class="button"><big> 
                            + value // Example page
                            + '</big></button></a>')) // </big></button></a>
                        }
                    }).fail(function() {
                        console.error('404 error: API connection timeout.');
                    });
                    var pictureWidth = $('#picture').width() - 9;
                    $('#to-search-container').width(pictureWidth);
                });
            </script>
        </div>
    </body>
</html>
